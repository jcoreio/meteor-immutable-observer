!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],t):"object"==typeof exports?exports["meteor-immutable-observer"]=t(require("immutable")):e["meteor-immutable-observer"]=t(e.Immutable)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(6),u=o(i),r=n(5),a=o(r),c=n(4),d=o(c);t["default"]={Map:u["default"],List:a["default"],IndexBy:d["default"]}},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return e instanceof r["default"].Collection&&t instanceof r["default"].Collection&&Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e.withMutations(function(n){e.forEach(function(e,o){t.has(o)||n["delete"](o)}),t.forEach(function(t,o){e.has(o)?n.set(o,i(e.get(o),t)):n.set(o,t)})}):e===t?e:t}t.__esModule=!0,t["default"]=i;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return e.withMutations(function(e){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];void 0===o?e["delete"](n):e.update(n,function(e){return(0,c["default"])(e,r["default"].fromJS(o))})}})}t.__esModule=!0,t["default"]=i;var u=n(1),r=o(u),a=n(2),c=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function n(e){o=e,i.changed()}if(f.active)throw new Error("This can't be used inside reactive computations; it could cause infinite invalidate loops");"string"==typeof t||"number"==typeof t?!function(){var e=t;t=function(t){return t.get(e)}}():t instanceof Array&&!function(){var e=t;t=function(t){return t.getIn(e)}}();var o=void 0,i=new f.Dependency,u={},a={},c=e.observeChanges({added:function(e,i){i._id=e;var c=r["default"].fromJS(i),d=t(c);if(a){if(a.hasOwnProperty(d))throw new Error("Key ("+d+") for added document _id "+e+" conflicts with a pre-existing document");a[d]=c}else{if(o.has(d))throw new Error("Key ("+d+") for added document _id "+e+" conflicts with a pre-existing document");n(o.set(d,c))}u[e]=d},changed:function(e,i){var r=u[e],a=(0,d["default"])(o.get(r),i),c=t(a);if(r!==c){if(o.has(c))throw new Error("Key for document _id "+e+" has changed from "+r+" to "+c+", which conflicts with a pre-existing document, because of changed fields: "+JSON.stringify(i));u[e]=c,n(o.withMutations(function(e){e["delete"](r),e.set(c,a)}))}else n(o.set(r,a))},removed:function(e){var t=u[e];delete u[e],n(o["delete"](t))}});return o=r["default"].Map(a),a=void 0,{documents:function(){return i.depend(),o},stop:function(){c.stop()}}}t.__esModule=!0,t["default"]=i;var u=n(1),r=o(u),a=n(2),c=(o(a),n(3)),d=o(c),f=Package.tracker.Tracker},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){n=e,o.changed()}if(d.active)throw new Error("This can't be used inside reactive computations; it could cause infinite invalidate loops");var n=void 0,o=new d.Dependency,i=[],u=e.observe({addedAt:function(e,o,u){i?i.splice(o,0,r["default"].fromJS(e)):t(n.splice(o,0,r["default"].fromJS(e)))},changedAt:function(e,o,i){t(n.update(i,function(t){return(0,c["default"])(t,r["default"].fromJS(e))}))},removedAt:function(e,o){t(n.splice(o,1))},movedTo:function(e,o,i,u){var r=n.get(o);t(n.splice(o,1).splice(i,0,r))}});return n=r["default"].List(i),i=void 0,{documents:function(){return o.depend(),n},stop:function(){u.stop()}}}t.__esModule=!0,t["default"]=i;var u=n(1),r=o(u),a=n(2),c=o(a),d=Package.tracker.Tracker},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){n=e,o.changed()}if(f.active)throw new Error("This can't be used inside reactive computations; it could cause infinite invalidate loops");var n=void 0,o=new f.Dependency,i={},u=e.observeChanges({added:function(e,o){o._id=e,i?i[e]=r["default"].fromJS(o):t(n.set(e,r["default"].fromJS(o)))},changed:function(e,o){t(n.update(e,function(e){return(0,d["default"])(e,o)}))},removed:function(e){t(n["delete"](e))}});return n=r["default"].Map(i),i=void 0,{documents:function(){return o.depend(),n},stop:function(){u.stop()}}}t.__esModule=!0,t["default"]=i;var u=n(1),r=o(u),a=n(2),c=(o(a),n(3)),d=o(c),f=Package.tracker.Tracker}])});